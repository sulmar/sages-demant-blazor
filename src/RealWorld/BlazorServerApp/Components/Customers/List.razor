@page "/customers"
@inject ICustomerRepository repository
@rendermode @(new InteractiveServerRenderMode(prerender: false))

<h3>Customer List</h3>

@if (customers is null)
{
    <LoaderComponent Title="Loading customers..." />
}
else
{
    <TableTemplate Items=@customers>
        <HeaderTemplate>
            <th>Id</th>
            <th>Name</th>
            <th>Email</th>
        </HeaderTemplate>
        <RowTemplate Context="customer">
            <td>@customer.Id</td>
            <td>@customer.Name</td>
            <td>@customer.Email</td>
        </RowTemplate>
    </TableTemplate>
}


@code {

    private IEnumerable<Customer>? customers;

    protected override async Task OnInitializedAsync()
    {
        customers = await repository.GetAllAsync();
    }

}